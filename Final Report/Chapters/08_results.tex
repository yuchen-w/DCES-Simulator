% !TEX root = ../main.tex
\chapter{Results}
\label{Results}

\section*{Simulating over 24 hours}
A copy of the complete simulation data can be found in the Appendices.

\subsection*{Analysis}
Five clusters of 5 Prosumer Agents (25 Prosumer Agents, 5 Virtual Agents and 1 Supervisor Agents) were simulated over 24 hours. Each cluster had 2 Prosumers generating using wind turbines and 3 Prosumers generating using photo-voltaic cells. With no data about the economic output or social utility of the individual households in Rugaragara being available, the data had to be generated for the simulation. All Prosumer Agents were initialised with a random \textit{Productivity} rating and a random \textit{Social Utility} representing a household's hourly contribution to the economic or social development of the local community.

As expected, with ample generation, all Prosumer Agents would receive some electricity. At no point in the simulation was there no electricity being received by the Prosumer Agents who were not generating at the time (solar powered Prosumers during the night). The general trend was that an Agent which was judged to have contributed more (under the \textit{Rescher's Canons of Distributive Justice}) would receive more allocation when demand outstrips generation, representing in a higher average satisfaction over 24 hours. As an example, the contribution according to the \textit{Rescher's Canon of Distributive Justice} of three of the Prosumers in \textit{Cluster0} has been included in table \ref{tab:cluster0}. In this example, it can be observed that the most satisfied \textit{Agent3} is contributing more than the least satisfied \textit{Agent0} across the board while maintaining a slightly smaller amount of requests over the simulated 24 hour period. 

\begin{table}[h]
\centering
	\caption{Prosumer Agent contribution data for Agent 0,1,3 in Cluster0}
	\label{tab:cluster0}
	\resizebox{\textwidth}{!}{%
	\begin{tabular}{llllll}
	\hline
	Agent & \begin{tabular}[c]{@{}l@{}}Average\\ Satisfaction\end{tabular} & \begin{tabular}[c]{@{}l@{}}Average \\ Request\end{tabular} & \begin{tabular}[c]{@{}l@{}}Average \\ Contribution\end{tabular} & \begin{tabular}[c]{@{}l@{}}Average\\ Productivity\end{tabular} & \begin{tabular}[c]{@{}l@{}}Social \\ Utility\end{tabular} \\ \hline
	0     & 0.712                                                          & 1.575                                                      & 2.214                                                           & 1.750                                                          & 1.667                                                     \\                                                   
	1     & 0.770                                                          & 1.575                                                      & 2.213                                                           & 2.208                                                          & 2.167                                                    \\
	3     & 0.676                                                          & 1.577                                                      & 0.379                                                           & 1.958                                                          & 1.875  \\
	 \hline
	\end{tabular}
	}
\end{table}

It is interesting to find that Agents can sometimes receive more than what they have requested, resulting in a satisfaction rating that is above 1 (see table \ref{tab:SatisfactionMoreThanOne}). Opportunities such as these arise due to the holonic nature of the system, as the Supervisor Agent allocates fairly to the Virtual Agents. If as a cluster, it is contributing more than the other clusters, then at the Supervisor Allocation stage, this particular cluster will be allocated more energy. If an Agent within that Cluster is contributing more, then that Agent will be allocated more of an already big pool, which can lead to allocating more energy than is requested by the Agent. 

Take the cases of Clusters 2 and 3, which both have had multiple occurrences of Agents being allocated more than requested; these clusters have had an above average contribution to the common pool which can be seen in table \ref{tab:ClusterRank}, and as a result have the two highest average satisfaction ratings. For both clusters, the occurrences happened within the hour before the simulation has finished, and happened at the same time. The average ranking according to the \textit{Rescher's Canons of Distributive Justice} is a good estimate of how much they were contributing prior to hour 22. Figure \ref{fig:SatisfactionVsRanking} shows the relationship between average ranking according to the \textit{Rescher's Canons of Distributive Justice} and the average Agent satisfaction within a Cluster. The trend is that, with higher ranking, comes higher average Agent satisfaction.

\begin{table}[h]
\centering
\caption{Occurrences of when Agents are allocated more than requested}
\label{tab:SatisfactionMoreThanOne}
\resizebox{\textwidth}{!}{%
\begin{tabular}{@{}ccccccccc@{}}
\toprule
Hour & Agent          & \begin{tabular}[c]{@{}c@{}}Requested\\ Demand\end{tabular} & \begin{tabular}[c]{@{}c@{}}Requested\\ Generation\end{tabular} & Productivity & \begin{tabular}[c]{@{}c@{}}Social\\ Utility\end{tabular} & \begin{tabular}[c]{@{}c@{}}Allocated\\ Demand\end{tabular} & \begin{tabular}[c]{@{}c@{}}Allocated\\ Generation\end{tabular} & Satisfaction \\ \midrule
14   & Cluster1Agent4 & 1.472                                                      & 1.014                                                          & 3.000        & 3.000                                                    & 1.574                                                      & 1.014                                                          & 1.069        \\
22   & Cluster2Agent0 & 1.213                                                      & 2.367                                                          & 2.000        & 4.000                                                    & 1.282                                                      & 2.367                                                          & 1.057        \\
22   & Cluster2Agent1 & 1.213                                                      & 2.378                                                          & 4.000        & 0.000                                                    & 1.360                                                      & 2.378                                                          & 1.121        \\
22   & Cluster3Agent3 & 1.215                                                      & 0.000                                                          & 4.000        & 3.000                                                    & 1.275                                                      & 0.000                                                          & 1.049        \\
22   & Cluster3Agent4 & 1.215                                                      & 0.000                                                          & 2.000        & 1.000                                                    & 1.229                                                      & 0.000                                                          & 1.012        \\
14   & Cluster4Agent1 & 1.473                                                      & 1.712                                                          & 4.000        & 2.000                                                    & 1.877                                                      & 1.712                                                          & 1.275        \\ \bottomrule
\end{tabular}
}
\end{table}


\begin{table}[h]
\centering
\caption{Cluster contributions}
\label{tab:ClusterContributions}
\resizebox{\textwidth}{!}{%
\begin{tabular}{@{}llllll@{}}
\toprule
\multicolumn{1}{c}{Cluster} & \multicolumn{1}{c}{\begin{tabular}[c]{@{}c@{}}Average \\ Request\end{tabular}} & \multicolumn{1}{c}{\begin{tabular}[c]{@{}c@{}}Average \\ Contribution\end{tabular}} & \multicolumn{1}{c}{\begin{tabular}[c]{@{}c@{}}Average \\ Productivity\end{tabular}} & \multicolumn{1}{c}{\begin{tabular}[c]{@{}c@{}}Social \\ Utility\end{tabular}} & \multicolumn{1}{c}{\begin{tabular}[c]{@{}c@{}}Average \\ Satisfaction\end{tabular}} \\ \midrule
Cluster0 & 1.576 & 1.113 & 1.967 & 2.075 & 0.715 \\
Cluster1 & 1.575 & 1.113 & 1.658 & 2.092 & 0.724 \\
Cluster2 & 1.575 & 1.114 & 2.058 & 2.067 & 0.762 \\
Cluster3 & 1.575 & 1.113 & 2.175 & 2.125 & 0.800 \\
Cluster4 & 1.575 & 1.113 & 2.142 & 2.050 & 0.715 \\ \bottomrule
\end{tabular}
}
\end{table}

\begin{table}[h]
\centering
\caption{Ranked cluster contributions using the data from table \ref{tab:ClusterContributions}}
\label{tab:ClusterRank}
\begin{tabular}{@{}lllllll@{}}
\toprule
\multicolumn{1}{c}{Cluster} & \multicolumn{1}{c}{\begin{tabular}[c]{@{}c@{}}Average \\ Request\end{tabular}} & \multicolumn{1}{c}{\begin{tabular}[c]{@{}c@{}}Average \\ Contribution\end{tabular}} & \multicolumn{1}{c}{\begin{tabular}[c]{@{}c@{}}Average \\ Productivity\end{tabular}} & \multicolumn{1}{c}{\begin{tabular}[c]{@{}c@{}}Social \\ Utility\end{tabular}} & \multicolumn{1}{c}{\begin{tabular}[c]{@{}c@{}}Average \\ Ranking\end{tabular}} & \multicolumn{1}{c}{\begin{tabular}[c]{@{}c@{}}Average \\ Satisfaction\end{tabular}} \\ \midrule
Cluster0                    & 5                                                                              & 4                                                                                   & 4                                                                                   & 3                                                                             & 4                                                                              & 0.715                                                                               \\
Cluster1                    & 3                                                                              & 3                                                                                   & 5                                                                                   & 2                                                                             & 3.25                                                                           & 0.724                                                                               \\
Cluster2                    & 2                                                                              & 1                                                                                   & 3                                                                                   & 4                                                                             & 2.5                                                                            & 0.762                                                                               \\
Cluster3                    & 1                                                                              & 2                                                                                   & 1                                                                                   & 1                                                                             & 1.25                                                                           & 0.800                                                                               \\
Cluster4                    & 4                                                                              & 5                                                                                   & 2                                                                                   & 5                                                                             & 4                                                                              & 0.715                                                                               \\ \bottomrule
\end{tabular}
\end{table}

\begin{figure} 
	\centering
	\setlength\figureheight{6cm} 
	\setlength\figurewidth{13cm} 
	\input{Figures/SatisfactionVsRanking.tikz} 
	\caption{Variation in satisfaction with varying average contribution ranking} 
	\label{fig:SatisfactionVsRanking} 
\end{figure}

\subsection*{Implications}
With a differing amount of satisfaction between clusters, the results have shown that it benefits to be a contributor in a Cluster in which all Agents contribute more than the average. In the real world, the households modeled in this simulation are likely to be in close geological proximity. Under the same weather conditions, more contribution to the common pool are likely to be as a result of better equipment which can be attributed to wealth. In the same vein, assuming that all households are equal and mechanisms are in place to prevent cheating or other selfish actions, higher productivity and social utility can also be attributed to higher wealth. For example, a communal fridge/shop/TV owned by a household can contribute to social utility, but this would only be the case if not everyone in the community is able to afford it. In the case of productivity, if a household has a spinning wheel to produce more yarn, that household is likely to be wealthier to be able to afford such equipment. 
With a higher than average allocation, these wealthier households are likely to be even more better off. This could result in either a wealth gap, or alternatively result in more development of the community if the extra allocation the households receive is reinvested in better equipment to generate more productivity, social utility or electricity for the larger community.
